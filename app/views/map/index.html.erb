<!DOCTYPE html>
<html>
<head>
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => false %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => false %>	

	<script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDo0NtFEmgkNmZZwrxpDqyXLJDTor37EV8&libraries=drawing,places,geometry" type="text/javascript" >
	</script>

	<title>MappyData</title>

	<%= csrf_meta_tags %>
	<%= alertify_flash %>

<!-- 	<style type="text/css">
	
	 	html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}

		#map { 
			height: 100%; 
			width: 100%;
			margin: 0;
			padding: 0;
		}

		#geolocateUI, #clearMapUI, #changeDBServerUI, #fyiUI, #attributionUI {
			background-color: #fff;
			border: 2px solid #fff;
			border-radius: 3px;
			box-shadow: 0 2px 6px rgba(0,0,0,.3);
			cursor: pointer;
			float: left;
			margin: 5px 10px 0 0;
			text-align: center;
		}

		#geolocateText, #clearMapText, #changeDBServerText, #fyiText, #attributionText {
			color: rgb(25,25,25);
			font-family: Roboto,Arial,sans-serif;
			font-size: 12px;
			line-height: 25px;
			padding-left: 5px;
			padding-right: 5px;
		}

		#attributionUI {
			/*background-image: url("/assets/help.png")*/
		}

/*		#clearMapUI {
			margin-left: 12px;
		}*/

		.controls {
			margin-top: 10px;
			border: 1px solid transparent;
			border-radius: 2px 0 0 2px;
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			height: 32px;
			outline: none;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
		}

		#pac-input {
			background-color: #fff;
			font-family: Roboto;
			font-size: 15px;
			font-weight: 300;
			margin-left: 0px;
			padding: 0 11px 0 13px;
			text-overflow: ellipsis;
			width: 300px;
		}

		#pac-input: focus {
			border-color: #4d90fe;
		}

		.pac-container {
			font-family: Roboto;
		}

		#type-selector {
			color: #fff;
			background-color: : #4d90fe;
			padding: 5px 11px 0px 11px;
		}

		#type-selector label {
			font-family: Roboto;
			font-size: 13px;
			font-weight: 300;
		}

		#panel, #flip, #info {
		    padding: 15px;
		    text-align: center;
		    background-color: rgb(45, 49, 63);
		    border: solid 1px #c3c3c3;
			color: #fff;
			font-family: Roboto,Arial,sans-serif;
			font-size: 15px;	    
		}

		#flip {
			color:orange;
			cursor:pointer
		}

		#panel {
		    padding: 15px;
		    display: none;
		}

/*		#info{
			padding: 5px;
		}*/
		.overlay {
		    height: 0%;
		    width: 0%;
		    position: fixed;
		    z-index: 1;
		    top: 0;
		    left: 0;
		    /*background-color: rgb(241,241,241);*/
		    background-color: rgba(181,152,152, 0.8);
		    overflow-x: hidden;
		    transition: 1s;
		    font-family: 'Lato', sans-serif;
		}

		.overlay-content {
		    position: relative;
		    top: 5%;
		    width: 100%;
		    text-align: center;
		    margin-top: 30px;
		    color: white;
		    /*margin: 10px, 20px, 10px, 20px;*/
		    /*padding: 20px 10px 20px 10px;*/
		}

		.overlay a {
		    padding: 8px;
		    text-decoration: none;
		    /*font-size: 36px;*/
		    color: #686868;
		    /*display: block;*/
		    transition: 0.1s;
		}

		.overlay a:hover, .overlay a:focus {
		    color: #f1f1f1;
		}

		.overlay .closebtn {
		    position: absolute;
		    top: 20px;
		    right: 45px;
		    font-size: 60px;
		}

		@media screen and (max-height: 450px) {
		  .overlay a {font-size: 20px}
		  .overlay .closebtn {
		    font-size: 40px;
		    top: 15px;
		    right: 35px;
		  }
		}

		#overlay-spinner {
			height: 100%;
			width: 100%;
		}

		.image_type1 {
			height: 42px;
			width: 42px;
		}
		.image_type2 {
			height: 48px;
			width: 48px;
		}
		.heroku_text:visited, .heroku_text:link {
			color: rgb(51,0,138);
			font-family: sans-serif;
		}
		.r360_text:visited, .r360_text:link {
			color: #27d84d;
			font-family: sans-serif;
		}
		.rpi:visited, .rpi:link {
			color: rgb(173,0,50);
			font-family: sans-serif;
		}

	</style>  -->


</head>

<body>

	<!-- <div id='flip'>Click here for more information about this website.</div> -->
<!-- 	<div id="myNav" class="overlay" onclick="closeNav();"><a class="closebtn" onclick="closeNav();">&times;</a><div class="overlay-content"><img src="/assets/map 2.png" height="128" width="128"></br></br>Given a polygon on the map, calculate and display population and housing counts based on 2010 U.S. Census Blocks.</br></br>Tools / Components</br>Ruby - Rails - JS -<a style=color:#27d84d href= "https://www.route360.net" target="_blank">Route360&deg</a>- Google Maps API - PostgreSQL/PostGIS - 2010 USA Census Data</br></br>By clicking on the map with the marker tool (upper left), a 3 minute isochrone (drive-time) polygon is calculated using Route360 REST Services and is subsequently inserted into a PostgreSQL/PostGIS table.  The isochrone polygon is then buffered and used to do a spatial query in PostgreSQL to determine intersection of the buffered isochrone polygon against census block polygons.</br></br>Uniform distribution of population and housing counts are assumed within a census block polygon.</br></br>The buffered polygon is then displayed on the map.  Within the buffered polygon is also displayed the original Route360 returned isochrone polygon(s) and line work.</br> (cool stuff, check them out ==><a style=color:#27d84d href="https://www.route360.net" target="_blank">Route360.net</a>)</br></br>PostgreSQL is hosted on a Raspberry Pi 2 board running Raspbian 8 (Jessie).  The Census Block table in the database contains over 11 millions records covering the entire United States.</br></br>PostgreSQL queries executed on the Raspberry Pi 2 is a known speed bottleneck for this application.  The Raspberry Pi was deployed for personal amusement.</br></br>This website is hosted at<a href="https://www.heroku.com/" target="_blank" style=color:rgb(51,0,138) font-family: 'Lato', sans-serif;>Heroku</a>using a free dyno.</br></br>This website is a work in progress.  There are known issues that will be addressed, maybe some enhancements.  This website is for demonstration purposes.  Thanks for visiting.</br></br><a style=color:yellow href="https://github.com/greghorne/mappy" target="_blank">GitHub Repository</a></div></div> -->

	<div id="myNav" class="overlay" onclick="closeNav();"><a class="closebtn" onclick="closeNav();" style=cursor:pointer>&times;</a><div class="overlay-content"><h1>MappyData</h1><img src="/assets/map 2.png" height="96" width="96"></br></br>Given a polygon on the map, calculate and display population and housing counts based on 2010 U.S. Census Blocks.</br></br>By clicking on the map with the marker tool (upper left), a 3 minute isochrone (drive-time) polygon is calculated using Route360 REST Services and is subsequently inserted into a PostgreSQL/PostGIS table.  The isochrone polygon is then buffered and used to do a spatial query in PostgreSQL to determine intersection of the buffered isochrone polygon against census block polygons.</br></br>Uniform distribution of population and housing counts are assumed within a census block polygon.</br></br>The buffered polygon is then displayed on the map.  Within the buffered polygon is also displayed the original Route360 returned isochrone polygon(s) and line work.</br> (cool stuff, check them out ==><a class="r360_text" target="_blank" href="https://www.route360.net">Route360.net</a>)</br></br>PostgreSQL is hosted on a<a class="rpi" target="_blank" href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b">Raspberry Pi 2</a>board running Raspbian 8 (Jessie).  The Census Block table in the database contains over 11 millions records covering the entire United States.</br></br>PostgreSQL queries executed on the Raspberry Pi 2 is a known speed bottleneck for this application.  The Raspberry Pi was deployed for personal amusement.</br></br>This website is hosted at<a href="https://www.heroku.com/" target="_blank" class="heroku_text">Heroku</a>using a hobby dyno.</br></br>This website is a work in progress.  There are known issues that will be addressed, maybe some enhancements.  This website is for demonstration purposes.  Thanks for visiting.</br></br><a style=color:yellow href="https://github.com/greghorne/mappy" target="_blank">GitHub Repository</a></br></br></br><a href="https://www.ruby-lang.org" target="_blank"><img src="/assets/Ruby_logo.svg" class="image_type1"></a>&nbsp;&nbsp;<a href="http://rubyonrails.org" target="_blank"><img src="/assets/rails1.svg" class="image_type1"></a>&nbsp;<a href="https://www.javascript.com" target="_blank"><img src="/assets/js2.png" class="image_type1"></a>&nbsp;&nbsp;<a href="https://www.postgresql.org" target="_blank"><img src="/assets/PG.png" class="image_type1"></a>&nbsp;&nbsp;<a href="https://postgis.net" target="_blank"><img src="/assets/PostGIS.jpeg" class="image_type1"></a>&nbsp;&nbsp;<a href="https://www.route360.net" target="_blank"><img src="/assets/route360_logo.svg" class="image_type2"></a>&nbsp;&nbsp;<a href="https://developers.google.com/maps/" target="_blank"><img src="/assets/googlemaps.png" class="image_type1"></a><a href="https://www.raspberrypi.org/" target="_blank"><img src="/assets/rpi.png" height="40" width="125"></a></div></div>

	<input id='pac-input' class='controls' type='text' placeholder='Search Box' style='border-radius:3px; background-color:#fff; visibility: hidden'>
	
	<div id="map"></div>
	




</body>
</html>
